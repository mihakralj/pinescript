// The MIT License (MIT)
// Â© mihakralj
//@version=6
indicator("Accumulation/Distribution Line", "ADL", overlay=false)

// @function Calculates the Accumulation/Distribution Line (ADL), a volume-based indicator that measures money flow
// @param src (series float) Source price series to use in calculations (default: close price)
// @param vol (series float) Volume series to use (default: built-in volume)
// @returns (float) The ADL value for the current bar
adl(src = close, vol = volume) =>
    money_flow = na(vol) or na(src) or high == low ? 0.0 : ((2*src - high - low) / (high - low)) * vol
    var float cumAD = 0.0
    cumAD := bar_index == 0 ? money_flow : cumAD + money_flow
    cumAD

// ---------- Calculations ----------
adl_value = adl()

// ---------- Plotting ----------
plot(adl_value, "ADL", color.new(color.yellow, 0), linewidth=2)
